<!DOCTYPE html>
<html lang="zh-cn">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<meta name="author" content="ç™½å°ç”Ÿ">
		<meta name="description" content="å­¦ä¹ ã€‚ã€‚ã€‚">
		<meta name="generator" content="Hugo 0.79.0" />
		<title>Java ç”ŸæˆéªŒè¯ç 1 &middot; ç™½å°ç”Ÿ</title>
		<link rel="shortcut icon" href="https://brandykk.gitee.io/images/favicon.ico">
		<link rel="stylesheet" href="https://brandykk.gitee.io/css/style.css">
		<link rel="stylesheet" href="https://brandykk.gitee.io/css/highlight.css">

		
		<link rel="stylesheet" href="https://brandykk.gitee.io/css/font-awesome.min.css">
		

		

		
	</head>

    <body>
       <nav class="main-nav">
	
	
		<a href='https://brandykk.gitee.io/'> <span class="arrow">â†</span>ğŸ¡</a>
	
	<a href='https://brandykk.gitee.io/posts'>æ—¶é—´çº¿</a>
	<a href='https://brandykk.gitee.io/tags'>æ ‡ç­¾</a>
	<a href='https://brandykk.gitee.io/about'>å…³äº</a>

	

	
</nav>


        <section id="wrapper" class="post">
            <article>
                <header>
                    <h1>
                        Java ç”ŸæˆéªŒè¯ç 1
                    </h1>
                    <h2 class="headline">
                    Dec 23, 2020 11:23
                    Â· 2196 words
                    Â· 5 minute read
                      <span class="tags">
                      
                      
                          
                              <a href="https://brandykk.gitee.io/tags/java">JAVA</a>
                          
                      
                      
                      </span>
                    </h2>
                </header>
                
                  
                    <div id="toc">
                      <nav id="TableOfContents">
  <ul>
    <li><a href="#utilityjava">Utility.java</a></li>
    <li><a href="#imageutiljava">ImageUtil.java</a></li>
    <li><a href="#éªŒè¯ç è°ƒç”¨æ–¹æ³•å¹¶è¿”å›">éªŒè¯ç è°ƒç”¨æ–¹æ³•å¹¶è¿”å›</a></li>
  </ul>
</nav>
                    </div>
                  
                
                <section id="post-body">
                    <h2 id="utilityjava">Utility.java</h2>
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> org.apache.commons.lang3.StringUtils<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.apache.commons.logging.Log<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.apache.commons.logging.LogFactory<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.math.BigDecimal<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.text.SimpleDateFormat<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.util.*<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Utility</span> <span style="color:#f92672">{</span>
	<span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">static</span> Log logger <span style="color:#f92672">=</span> LogFactory<span style="color:#f92672">.</span><span style="color:#a6e22e">getLog</span><span style="color:#f92672">(</span>Utility<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> List<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">newArray</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> size<span style="color:#f92672">,</span> Class<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> clazz<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		List<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> l <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;();</span>
		<span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> size<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
			T newInstance<span style="color:#f92672">;</span>
			<span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
				newInstance <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">newInstance</span><span style="color:#f92672">();</span>
			<span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
				newInstance <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
			<span style="color:#f92672">}</span>
			l<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>newInstance<span style="color:#f92672">);</span>
		<span style="color:#f92672">}</span>
		<span style="color:#66d9ef">return</span> l<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> String <span style="color:#a6e22e">randomString</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> len<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> type<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		StringBuffer str <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> StringBuffer<span style="color:#f92672">();</span>
		<span style="color:#75715e">// é»˜è®¤å»æ‰äº†å®¹æ˜“æ··æ·†çš„å­—ç¬¦oOLlIï¼Œè¦æ·»åŠ è¯·ä½¿ç”¨addCharså‚æ•°
</span><span style="color:#75715e"></span>		String codestr <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ABCDEFGHJKMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz&#34;</span><span style="color:#f92672">;</span>
		String codeNum <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;0123456789&#34;</span><span style="color:#f92672">;</span>
<span style="color:#75715e">//		switch (type) {
</span><span style="color:#75715e">//		case 0:
</span><span style="color:#75715e">//			codestr = &#34;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&#34;;
</span><span style="color:#75715e">//			break;
</span><span style="color:#75715e">//		case 1:
</span><span style="color:#75715e">//			codestr = &#34;0123456789&#34;;
</span><span style="color:#75715e">//			break;
</span><span style="color:#75715e">//		case 2:
</span><span style="color:#75715e">//			codestr = &#34;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#34;;
</span><span style="color:#75715e">//			break;
</span><span style="color:#75715e">//		case 3:
</span><span style="color:#75715e">//			codestr = &#34;abcdefghijklmnopqrstuvwxyz&#34;;
</span><span style="color:#75715e">//			break;
</span><span style="color:#75715e">//		default:
</span><span style="color:#75715e">//			// é»˜è®¤å»æ‰äº†å®¹æ˜“æ··æ·†çš„å­—ç¬¦oOLlå’Œæ•°å­—01ï¼Œè¦æ·»åŠ è¯·ä½¿ç”¨addCharså‚æ•°
</span><span style="color:#75715e">//			codestr = &#34;ABCDEFGHIJKMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789&#34;;
</span><span style="color:#75715e">//			break;
</span><span style="color:#75715e">//		}
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">char</span><span style="color:#f92672">[]</span> codes <span style="color:#f92672">=</span> codestr<span style="color:#f92672">.</span><span style="color:#a6e22e">toCharArray</span><span style="color:#f92672">();</span>
		<span style="color:#66d9ef">char</span><span style="color:#f92672">[]</span> codeNums <span style="color:#f92672">=</span> codeNum<span style="color:#f92672">.</span><span style="color:#a6e22e">toCharArray</span><span style="color:#f92672">();</span>
		<span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> len<span style="color:#f92672">/</span>2<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
			<span style="color:#66d9ef">int</span> r <span style="color:#f92672">=</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> <span style="color:#f92672">(</span>Math<span style="color:#f92672">.</span><span style="color:#a6e22e">random</span><span style="color:#f92672">()</span> <span style="color:#f92672">*</span> codestr<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">());</span>
			str<span style="color:#f92672">.</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span>codes<span style="color:#f92672">[</span>r<span style="color:#f92672">]);</span>
			<span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> <span style="color:#f92672">(</span>Math<span style="color:#f92672">.</span><span style="color:#a6e22e">random</span><span style="color:#f92672">()*</span>codeNum<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">());</span>
			str<span style="color:#f92672">.</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span>n<span style="color:#f92672">);</span>
		<span style="color:#f92672">}</span>
		List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> list<span style="color:#f92672">=</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">asList</span><span style="color:#f92672">(</span>str<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">().</span><span style="color:#a6e22e">split</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">));</span>
		Collections<span style="color:#f92672">.</span><span style="color:#a6e22e">shuffle</span><span style="color:#f92672">(</span>list<span style="color:#f92672">);</span>
		StringBuffer str1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> StringBuffer<span style="color:#f92672">();</span>
		<span style="color:#66d9ef">for</span><span style="color:#f92672">(</span>String s<span style="color:#f92672">:</span>list<span style="color:#f92672">){</span>
			str1<span style="color:#f92672">.</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span>s<span style="color:#f92672">);</span>
		<span style="color:#f92672">}</span>
		<span style="color:#66d9ef">return</span> str1<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">();</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> String <span style="color:#a6e22e">randomString</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> length<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> randomString<span style="color:#f92672">(</span>length<span style="color:#f92672">,</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">);</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">random</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> number<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> <span style="color:#f92672">(</span>Math<span style="color:#f92672">.</span><span style="color:#a6e22e">random</span><span style="color:#f92672">()</span> <span style="color:#f92672">*</span> number<span style="color:#f92672">);</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Random random <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Random<span style="color:#f92672">();</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">random</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> total<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> count<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>count <span style="color:#f92672">==</span> 1<span style="color:#f92672">)</span>
			<span style="color:#66d9ef">return</span> total<span style="color:#f92672">;</span>
		<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>count <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
			<span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
		<span style="color:#f92672">}</span>
		<span style="color:#66d9ef">int</span> average <span style="color:#f92672">=</span> total <span style="color:#f92672">/</span> count<span style="color:#f92672">;</span>
		<span style="color:#66d9ef">double</span> d <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span><span style="color:#a6e22e">nextGaussian</span><span style="color:#f92672">();</span>
		<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>d <span style="color:#f92672">&lt;</span> <span style="color:#f92672">-</span>0<span style="color:#f92672">.</span><span style="color:#a6e22e">75</span><span style="color:#f92672">)</span>
			d <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>0<span style="color:#f92672">.</span><span style="color:#a6e22e">75</span><span style="color:#f92672">;</span>
		<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>d <span style="color:#f92672">&lt;</span> <span style="color:#f92672">-</span>1 <span style="color:#f92672">+</span> 1<span style="color:#f92672">.</span><span style="color:#a6e22e">0</span> <span style="color:#f92672">/</span> count<span style="color:#f92672">)</span>
			d <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1 <span style="color:#f92672">+</span> 1<span style="color:#f92672">.</span><span style="color:#a6e22e">0</span> <span style="color:#f92672">/</span> count<span style="color:#f92672">;</span>
		<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>d <span style="color:#f92672">&gt;</span> 4<span style="color:#f92672">)</span>
			d <span style="color:#f92672">=</span> 4<span style="color:#f92672">;</span>
		<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>d <span style="color:#f92672">&gt;</span> count <span style="color:#f92672">-</span> 0<span style="color:#f92672">.</span><span style="color:#a6e22e">1</span><span style="color:#f92672">)</span>
			d <span style="color:#f92672">=</span> count <span style="color:#f92672">-</span> 0<span style="color:#f92672">.</span><span style="color:#a6e22e">1</span><span style="color:#f92672">;</span>
		<span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> <span style="color:#f92672">(</span>d <span style="color:#f92672">*</span> average <span style="color:#f92672">+</span> average<span style="color:#f92672">);</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> String <span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>Object o<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>o <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
			<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
		Class c <span style="color:#f92672">=</span> o<span style="color:#f92672">.</span><span style="color:#a6e22e">getClass</span><span style="color:#f92672">();</span>
		<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
			<span style="color:#66d9ef">return</span> Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">((</span>Integer<span style="color:#f92672">)</span> o<span style="color:#f92672">);</span>
		<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> Float<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
			<span style="color:#66d9ef">return</span> Float<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">((</span>Float<span style="color:#f92672">)</span> o<span style="color:#f92672">);</span>
		<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> Long<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
			<span style="color:#66d9ef">return</span> Long<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">((</span>Long<span style="color:#f92672">)</span> o<span style="color:#f92672">);</span>
		<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> Double<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
			<span style="color:#66d9ef">return</span> Double<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">((</span>Double<span style="color:#f92672">)</span> o<span style="color:#f92672">);</span>
		<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> BigDecimal<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
			<span style="color:#66d9ef">return</span> o<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">();</span>
		<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> Boolean<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
			<span style="color:#66d9ef">return</span> Boolean<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">((</span>Boolean<span style="color:#f92672">)</span> o<span style="color:#f92672">);</span>
		<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> Date<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
			SimpleDateFormat sdf <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> SimpleDateFormat<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;yyyy-MM-dd HH:mm:ss&#34;</span><span style="color:#f92672">);</span>
			String ss <span style="color:#f92672">=</span> sdf<span style="color:#f92672">.</span><span style="color:#a6e22e">format</span><span style="color:#f92672">(</span>o<span style="color:#f92672">);</span>
			<span style="color:#66d9ef">return</span> ss<span style="color:#f92672">;</span>
		<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
			<span style="color:#66d9ef">return</span> o<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">();</span>
		<span style="color:#f92672">}</span>
	<span style="color:#f92672">}</span>


	<span style="color:#a6e22e">@SuppressWarnings</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;unchecked&#34;</span><span style="color:#f92672">)</span>
	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> T <span style="color:#a6e22e">toObject</span><span style="color:#f92672">(</span>String str<span style="color:#f92672">,</span> Class<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> c<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>str <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
			<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
		<span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
			str <span style="color:#f92672">=</span> str<span style="color:#f92672">.</span><span style="color:#a6e22e">trim</span><span style="color:#f92672">();</span>
			<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> String<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
				<span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>T<span style="color:#f92672">)</span> str<span style="color:#f92672">;</span>
			<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>StringUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">isBlank</span><span style="color:#f92672">(</span>str<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
				<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
			<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
				<span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>T<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>Integer<span style="color:#f92672">)</span> Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">parseInt</span><span style="color:#f92672">(</span>str<span style="color:#f92672">);</span>
			<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> Long<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
				<span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>T<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>Long<span style="color:#f92672">)</span> Long<span style="color:#f92672">.</span><span style="color:#a6e22e">parseLong</span><span style="color:#f92672">(</span>str<span style="color:#f92672">);</span>
			<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> Byte<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
				<span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>T<span style="color:#f92672">)</span> <span style="color:#66d9ef">new</span> Byte<span style="color:#f92672">((</span><span style="color:#66d9ef">byte</span><span style="color:#f92672">)</span> Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">parseInt</span><span style="color:#f92672">(</span>str<span style="color:#f92672">,</span> 16<span style="color:#f92672">));</span>
			<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> Float<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
				<span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>T<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>Float<span style="color:#f92672">)</span> Float<span style="color:#f92672">.</span><span style="color:#a6e22e">parseFloat</span><span style="color:#f92672">(</span>str<span style="color:#f92672">);</span>
			<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> Double<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
				<span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>T<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>Double<span style="color:#f92672">)</span> Double<span style="color:#f92672">.</span><span style="color:#a6e22e">parseDouble</span><span style="color:#f92672">(</span>str<span style="color:#f92672">);</span>
			<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> Boolean<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
				<span style="color:#66d9ef">if</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;1&#34;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>str<span style="color:#f92672">))</span>
					<span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>T<span style="color:#f92672">)</span>Boolean<span style="color:#f92672">.</span><span style="color:#a6e22e">TRUE</span><span style="color:#f92672">;</span>
				<span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>T<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>Boolean<span style="color:#f92672">)</span> Boolean<span style="color:#f92672">.</span><span style="color:#a6e22e">parseBoolean</span><span style="color:#f92672">(</span>str<span style="color:#f92672">);</span>
			<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> BigDecimal<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
				<span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>T<span style="color:#f92672">)</span> <span style="color:#66d9ef">new</span> BigDecimal<span style="color:#f92672">(</span>str<span style="color:#f92672">);</span>
			<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> Date<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
				SimpleDateFormat sdf <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> SimpleDateFormat<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;yyyy-MM-dd HH:mm:ss&#34;</span><span style="color:#f92672">);</span>
				Date ss <span style="color:#f92672">=</span> sdf<span style="color:#f92672">.</span><span style="color:#a6e22e">parse</span><span style="color:#f92672">(</span>str<span style="color:#f92672">);</span>
				<span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>T<span style="color:#f92672">)</span> ss<span style="color:#f92672">;</span>
			<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
				<span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>T<span style="color:#f92672">)</span> str<span style="color:#f92672">;</span>
			<span style="color:#f92672">}</span>
		<span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
			<span style="color:#75715e">// æ‰“å°å¼‚å¸¸ä¿¡æ¯ï¼Œä¾‹å½“ä¸€ä¸ªéå¸¸é•¿çš„æ•°å­—å­—ç¬¦ä¸²è½¬Integeræ—¶ï¼Œè‹¥æ²¡æœ‰æ„è¯†åˆ°Integeræ•°å­—å¤§å°é™åˆ¶æ—¶ï¼Œæ²¡æœ‰å¼‚å¸¸è¾“å‡ºï¼Œéš¾äºæ‰¾åˆ°åŸå› ã€‚éå¸¸ä¸åˆ©é—®é¢˜çš„è§£å†³
</span><span style="color:#75715e"></span>			logger<span style="color:#f92672">.</span><span style="color:#a6e22e">debug</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;å¯¹è±¡è½¬æ¢å¼‚å¸¸ï¼Œè°ƒè¯•ç”¨&#34;</span><span style="color:#f92672">,</span> e<span style="color:#f92672">);</span>
			<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
		<span style="color:#f92672">}</span>
	<span style="color:#f92672">}</span>

	
	<span style="color:#75715e">// åˆ—ä¸¾æ’åº
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> List<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span>Enumeration<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> enumer<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		List<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> l <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;();</span>
		<span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>enumer<span style="color:#f92672">.</span><span style="color:#a6e22e">hasMoreElements</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
			T t <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>T<span style="color:#f92672">)</span> enumer<span style="color:#f92672">.</span><span style="color:#a6e22e">nextElement</span><span style="color:#f92672">();</span>
			l<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>t<span style="color:#f92672">);</span>
		<span style="color:#f92672">}</span>
		Collections<span style="color:#f92672">.</span><span style="color:#a6e22e">sort</span><span style="color:#f92672">((</span>List<span style="color:#f92672">)</span> l<span style="color:#f92672">);</span>
		<span style="color:#66d9ef">return</span> l<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#75715e">// åˆ—è¡¨æ’åº
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> List<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span>List<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> l<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		Collections<span style="color:#f92672">.</span><span style="color:#a6e22e">sort</span><span style="color:#f92672">((</span>List<span style="color:#f92672">)</span> l<span style="color:#f92672">);</span>
		<span style="color:#66d9ef">return</span> l<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> String <span style="color:#a6e22e">substring</span><span style="color:#f92672">(</span>String str<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> from<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> to<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>from <span style="color:#f92672">&gt;=</span> str<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">())</span>
			<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
		<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>from <span style="color:#f92672">&lt;</span> 0<span style="color:#f92672">)</span>
			from <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
		<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>to <span style="color:#f92672">&lt;</span> 0 <span style="color:#f92672">||</span> to <span style="color:#f92672">&gt;</span> str<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">())</span>
			<span style="color:#66d9ef">return</span> str<span style="color:#f92672">.</span><span style="color:#a6e22e">substring</span><span style="color:#f92672">(</span>from<span style="color:#f92672">);</span>
		<span style="color:#66d9ef">else</span>
			<span style="color:#66d9ef">return</span> str<span style="color:#f92672">.</span><span style="color:#a6e22e">substring</span><span style="color:#f92672">(</span>from<span style="color:#f92672">,</span> to<span style="color:#f92672">);</span>
	<span style="color:#f92672">}</span>

<span style="color:#75715e">//	public static void main(String[] args) {
</span><span style="color:#75715e">//		String in = randomString(4);
</span><span style="color:#75715e">//		System.out.println(in);
</span><span style="color:#75715e">//	}
</span><span style="color:#75715e"></span>

<span style="color:#f92672">}</span>

</code></pre></div><!-- raw HTML omitted -->
<h2 id="imageutiljava">ImageUtil.java</h2>
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> lombok.extern.slf4j.Slf4j<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.jeecg.common.util.IOCloseUtil<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> javax.imageio.ImageIO<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.awt.*<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.awt.geom.AffineTransform<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.awt.image.BufferedImage<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.io.File<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.io.FileOutputStream<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.io.IOException<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.io.OutputStream<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.util.Arrays<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.util.Random<span style="color:#f92672">;</span>

<span style="color:#a6e22e">@Slf4j</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ImageUtil</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">//ä½¿ç”¨åˆ°Algerianå­—ä½“ï¼Œç³»ç»Ÿé‡Œæ²¡æœ‰çš„è¯éœ€è¦å®‰è£…å­—ä½“ï¼Œå­—ä½“åªæ˜¾ç¤ºå¤§å†™ï¼Œå»æ‰äº†1,0,i,oå‡ ä¸ªå®¹æ˜“æ··æ·†çš„å­—ç¬¦
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String VERIFY_CODES <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;23456789ABCDEFGHJKLMNPQRSTUVWXYZ&#34;</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Random random <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Random<span style="color:#f92672">();</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * ä½¿ç”¨ç³»ç»Ÿé»˜è®¤å­—ç¬¦æºç”ŸæˆéªŒè¯ç 
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param verifySize éªŒè¯ç é•¿åº¦
</span><span style="color:#75715e">     * @return
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> String <span style="color:#a6e22e">generateVerifyCode</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> verifySize<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> generateVerifyCode<span style="color:#f92672">(</span>verifySize<span style="color:#f92672">,</span> VERIFY_CODES<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * ä½¿ç”¨æŒ‡å®šæºç”ŸæˆéªŒè¯ç 
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param verifySize éªŒè¯ç é•¿åº¦
</span><span style="color:#75715e">     * @param sources    éªŒè¯ç å­—ç¬¦æº
</span><span style="color:#75715e">     * @return
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> String <span style="color:#a6e22e">generateVerifyCode</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> verifySize<span style="color:#f92672">,</span> String sources<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>sources <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> sources<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">()</span> <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            sources <span style="color:#f92672">=</span> VERIFY_CODES<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> codesLen <span style="color:#f92672">=</span> sources<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">();</span>
        Random rand <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Random<span style="color:#f92672">(</span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">());</span>
        StringBuilder verifyCode <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> StringBuilder<span style="color:#f92672">(</span>verifySize<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> verifySize<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            verifyCode<span style="color:#f92672">.</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span>sources<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>rand<span style="color:#f92672">.</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>codesLen <span style="color:#f92672">-</span> 1<span style="color:#f92672">)));</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> verifyCode<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * ç”ŸæˆéšæœºéªŒè¯ç æ–‡ä»¶,å¹¶è¿”å›éªŒè¯ç å€¼
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param w
</span><span style="color:#75715e">     * @param h
</span><span style="color:#75715e">     * @param outputFile
</span><span style="color:#75715e">     * @param verifySize
</span><span style="color:#75715e">     * @return
</span><span style="color:#75715e">     * @throws IOException
</span><span style="color:#75715e">     */</span>
<span style="color:#75715e">//    public static String outputVerifyImage(int w, int h, File outputFile, int verifySize) throws IOException {
</span><span style="color:#75715e">//        String verifyCode = generateVerifyCode(verifySize);
</span><span style="color:#75715e">//        outputImage(w, h, outputFile, verifyCode);
</span><span style="color:#75715e">//        return verifyCode;
</span><span style="color:#75715e">//    }
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * è¾“å‡ºéšæœºéªŒè¯ç å›¾ç‰‡æµ,å¹¶è¿”å›éªŒè¯ç å€¼
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param w
</span><span style="color:#75715e">     * @param h
</span><span style="color:#75715e">     * @param os
</span><span style="color:#75715e">     * @param verifySize
</span><span style="color:#75715e">     * @return
</span><span style="color:#75715e">     * @throws IOException
</span><span style="color:#75715e">     */</span>
<span style="color:#75715e">//    public static String outputVerifyImage(int w, int h, OutputStream os, int verifySize) throws IOException {
</span><span style="color:#75715e">//        String verifyCode = generateVerifyCode(verifySize);
</span><span style="color:#75715e">//        outputImage(w, h, os, verifyCode);
</span><span style="color:#75715e">//        return verifyCode;
</span><span style="color:#75715e">//    }
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * ç”ŸæˆæŒ‡å®šéªŒè¯ç å›¾åƒæ–‡ä»¶
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param w
</span><span style="color:#75715e">     * @param h
</span><span style="color:#75715e">     * @param outputFile
</span><span style="color:#75715e">     * @param code
</span><span style="color:#75715e">     * @throws IOException
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">outputImage</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> w<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> h<span style="color:#f92672">,</span> File outputFile<span style="color:#f92672">,</span> String code<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>outputFile <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        File dir <span style="color:#f92672">=</span> outputFile<span style="color:#f92672">.</span><span style="color:#a6e22e">getParentFile</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>dir<span style="color:#f92672">.</span><span style="color:#a6e22e">exists</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            dir<span style="color:#f92672">.</span><span style="color:#a6e22e">mkdirs</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            outputFile<span style="color:#f92672">.</span><span style="color:#a6e22e">createNewFile</span><span style="color:#f92672">();</span>
            FileOutputStream fos <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> FileOutputStream<span style="color:#f92672">(</span>outputFile<span style="color:#f92672">);</span>
            outputImage<span style="color:#f92672">(</span>w<span style="color:#f92672">,</span> h<span style="color:#f92672">,</span> fos<span style="color:#f92672">,</span> code<span style="color:#f92672">);</span>
            IOCloseUtil<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">(</span>fos<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>IOException e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> e<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * è¾“å‡ºæŒ‡å®šéªŒè¯ç å›¾ç‰‡æµ
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param w
</span><span style="color:#75715e">     * @param h
</span><span style="color:#75715e">     * @param os
</span><span style="color:#75715e">     * @param code
</span><span style="color:#75715e">     * @throws IOException
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">outputImage</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> w<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> h<span style="color:#f92672">,</span> OutputStream os<span style="color:#f92672">,</span> String code<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> verifySize <span style="color:#f92672">=</span> code<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">();</span>
        BufferedImage image <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedImage<span style="color:#f92672">(</span>w<span style="color:#f92672">,</span> h<span style="color:#f92672">,</span> BufferedImage<span style="color:#f92672">.</span><span style="color:#a6e22e">TYPE_INT_RGB</span><span style="color:#f92672">);</span>
        Random rand <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Random<span style="color:#f92672">();</span>
        Graphics2D g2 <span style="color:#f92672">=</span> image<span style="color:#f92672">.</span><span style="color:#a6e22e">createGraphics</span><span style="color:#f92672">();</span>
        g2<span style="color:#f92672">.</span><span style="color:#a6e22e">setRenderingHint</span><span style="color:#f92672">(</span>RenderingHints<span style="color:#f92672">.</span><span style="color:#a6e22e">KEY_ANTIALIASING</span><span style="color:#f92672">,</span> RenderingHints<span style="color:#f92672">.</span><span style="color:#a6e22e">VALUE_ANTIALIAS_ON</span><span style="color:#f92672">);</span>
        Color<span style="color:#f92672">[]</span> colors <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Color<span style="color:#f92672">[</span>5<span style="color:#f92672">];</span>
        Color<span style="color:#f92672">[]</span> colorSpaces <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Color<span style="color:#f92672">[]{</span>Color<span style="color:#f92672">.</span><span style="color:#a6e22e">WHITE</span><span style="color:#f92672">,</span> Color<span style="color:#f92672">.</span><span style="color:#a6e22e">CYAN</span><span style="color:#f92672">,</span>
                Color<span style="color:#f92672">.</span><span style="color:#a6e22e">GRAY</span><span style="color:#f92672">,</span> Color<span style="color:#f92672">.</span><span style="color:#a6e22e">LIGHT_GRAY</span><span style="color:#f92672">,</span> Color<span style="color:#f92672">.</span><span style="color:#a6e22e">MAGENTA</span><span style="color:#f92672">,</span> Color<span style="color:#f92672">.</span><span style="color:#a6e22e">ORANGE</span><span style="color:#f92672">,</span>
                Color<span style="color:#f92672">.</span><span style="color:#a6e22e">PINK</span><span style="color:#f92672">,</span> Color<span style="color:#f92672">.</span><span style="color:#a6e22e">YELLOW</span><span style="color:#f92672">};</span>
        <span style="color:#66d9ef">float</span><span style="color:#f92672">[]</span> fractions <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">float</span><span style="color:#f92672">[</span>colors<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> colors<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            colors<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> colorSpaces<span style="color:#f92672">[</span>rand<span style="color:#f92672">.</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>colorSpaces<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)];</span>
            fractions<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> rand<span style="color:#f92672">.</span><span style="color:#a6e22e">nextFloat</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span>fractions<span style="color:#f92672">);</span>

        g2<span style="color:#f92672">.</span><span style="color:#a6e22e">setColor</span><span style="color:#f92672">(</span>Color<span style="color:#f92672">.</span><span style="color:#a6e22e">GRAY</span><span style="color:#f92672">);</span><span style="color:#75715e">// è®¾ç½®è¾¹æ¡†è‰²
</span><span style="color:#75715e"></span>        g2<span style="color:#f92672">.</span><span style="color:#a6e22e">fillRect</span><span style="color:#f92672">(</span>0<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> w<span style="color:#f92672">,</span> h<span style="color:#f92672">);</span>

        Color c <span style="color:#f92672">=</span> getRandColor<span style="color:#f92672">(</span>200<span style="color:#f92672">,</span> 250<span style="color:#f92672">);</span>
        g2<span style="color:#f92672">.</span><span style="color:#a6e22e">setColor</span><span style="color:#f92672">(</span>c<span style="color:#f92672">);</span><span style="color:#75715e">// è®¾ç½®èƒŒæ™¯è‰²
</span><span style="color:#75715e"></span>        g2<span style="color:#f92672">.</span><span style="color:#a6e22e">fillRect</span><span style="color:#f92672">(</span>0<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> w<span style="color:#f92672">,</span> h <span style="color:#f92672">-</span> 4<span style="color:#f92672">);</span>

        <span style="color:#75715e">//ç»˜åˆ¶å¹²æ‰°çº¿
</span><span style="color:#75715e"></span>        Random random <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Random<span style="color:#f92672">();</span>
        g2<span style="color:#f92672">.</span><span style="color:#a6e22e">setColor</span><span style="color:#f92672">(</span>getRandColor<span style="color:#f92672">(</span>160<span style="color:#f92672">,</span> 200<span style="color:#f92672">));</span><span style="color:#75715e">// è®¾ç½®çº¿æ¡çš„é¢œè‰²
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> 20<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>w <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>h <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">int</span> xl <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>6<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">int</span> yl <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>12<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
            g2<span style="color:#f92672">.</span><span style="color:#a6e22e">drawLine</span><span style="color:#f92672">(</span>x<span style="color:#f92672">,</span> y<span style="color:#f92672">,</span> x <span style="color:#f92672">+</span> xl <span style="color:#f92672">+</span> 40<span style="color:#f92672">,</span> y <span style="color:#f92672">+</span> yl <span style="color:#f92672">+</span> 20<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

        <span style="color:#75715e">// æ·»åŠ å™ªç‚¹
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">float</span> yawpRate <span style="color:#f92672">=</span> 0<span style="color:#f92672">.</span><span style="color:#a6e22e">05f</span><span style="color:#f92672">;</span><span style="color:#75715e">// å™ªå£°ç‡
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> area <span style="color:#f92672">=</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> <span style="color:#f92672">(</span>yawpRate <span style="color:#f92672">*</span> w <span style="color:#f92672">*</span> h<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> area<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>w<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>h<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">int</span> rgb <span style="color:#f92672">=</span> getRandomIntColor<span style="color:#f92672">();</span>
            image<span style="color:#f92672">.</span><span style="color:#a6e22e">setRGB</span><span style="color:#f92672">(</span>x<span style="color:#f92672">,</span> y<span style="color:#f92672">,</span> rgb<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

        shear<span style="color:#f92672">(</span>g2<span style="color:#f92672">,</span> w<span style="color:#f92672">,</span> h<span style="color:#f92672">,</span> c<span style="color:#f92672">);</span><span style="color:#75715e">// ä½¿å›¾ç‰‡æ‰­æ›²
</span><span style="color:#75715e"></span>
        g2<span style="color:#f92672">.</span><span style="color:#a6e22e">setColor</span><span style="color:#f92672">(</span>getRandColor<span style="color:#f92672">(</span>100<span style="color:#f92672">,</span> 160<span style="color:#f92672">));</span>
        <span style="color:#66d9ef">int</span> fontSize <span style="color:#f92672">=</span> h <span style="color:#f92672">-</span> 4<span style="color:#f92672">;</span>
        Font font <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Font<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Algerian&#34;</span><span style="color:#f92672">,</span> Font<span style="color:#f92672">.</span><span style="color:#a6e22e">ITALIC</span><span style="color:#f92672">,</span> fontSize<span style="color:#f92672">);</span>
        g2<span style="color:#f92672">.</span><span style="color:#a6e22e">setFont</span><span style="color:#f92672">(</span>font<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">char</span><span style="color:#f92672">[]</span> chars <span style="color:#f92672">=</span> code<span style="color:#f92672">.</span><span style="color:#a6e22e">toCharArray</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> verifySize<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            AffineTransform affine <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> AffineTransform<span style="color:#f92672">();</span>
            affine<span style="color:#f92672">.</span><span style="color:#a6e22e">setToRotation</span><span style="color:#f92672">(</span>Math<span style="color:#f92672">.</span><span style="color:#a6e22e">PI</span> <span style="color:#f92672">/</span> 4 <span style="color:#f92672">*</span> rand<span style="color:#f92672">.</span><span style="color:#a6e22e">nextDouble</span><span style="color:#f92672">()</span> <span style="color:#f92672">*</span> <span style="color:#f92672">(</span>rand<span style="color:#f92672">.</span><span style="color:#a6e22e">nextBoolean</span><span style="color:#f92672">()</span> <span style="color:#f92672">?</span> 1 <span style="color:#f92672">:</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">),</span> <span style="color:#f92672">(</span>w <span style="color:#f92672">/</span> verifySize<span style="color:#f92672">)</span> <span style="color:#f92672">*</span> i <span style="color:#f92672">+</span> fontSize <span style="color:#f92672">/</span> 2<span style="color:#f92672">,</span> h <span style="color:#f92672">/</span> 2<span style="color:#f92672">);</span>
            g2<span style="color:#f92672">.</span><span style="color:#a6e22e">setTransform</span><span style="color:#f92672">(</span>affine<span style="color:#f92672">);</span>
            g2<span style="color:#f92672">.</span><span style="color:#a6e22e">drawChars</span><span style="color:#f92672">(</span>chars<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> <span style="color:#f92672">((</span>w <span style="color:#f92672">-</span> 10<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> verifySize<span style="color:#f92672">)</span> <span style="color:#f92672">*</span> i <span style="color:#f92672">+</span> 5<span style="color:#f92672">,</span> h <span style="color:#f92672">/</span> 2 <span style="color:#f92672">+</span> fontSize <span style="color:#f92672">/</span> 2 <span style="color:#f92672">-</span> 10<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

        g2<span style="color:#f92672">.</span><span style="color:#a6e22e">dispose</span><span style="color:#f92672">();</span>
        ImageIO<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>image<span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;png&#34;</span><span style="color:#f92672">,</span> os<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Color <span style="color:#a6e22e">getRandColor</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> fc<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> bc<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>fc <span style="color:#f92672">&gt;</span> 255<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            fc <span style="color:#f92672">=</span> 255<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>bc <span style="color:#f92672">&gt;</span> 255<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            bc <span style="color:#f92672">=</span> 255<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> r <span style="color:#f92672">=</span> fc <span style="color:#f92672">+</span> random<span style="color:#f92672">.</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>bc <span style="color:#f92672">-</span> fc<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">int</span> g <span style="color:#f92672">=</span> fc <span style="color:#f92672">+</span> random<span style="color:#f92672">.</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>bc <span style="color:#f92672">-</span> fc<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">int</span> b <span style="color:#f92672">=</span> fc <span style="color:#f92672">+</span> random<span style="color:#f92672">.</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>bc <span style="color:#f92672">-</span> fc<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Color<span style="color:#f92672">(</span>r<span style="color:#f92672">,</span> g<span style="color:#f92672">,</span> b<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getRandomIntColor</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> rgb <span style="color:#f92672">=</span> getRandomRgb<span style="color:#f92672">();</span>
        <span style="color:#66d9ef">int</span> color <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> c <span style="color:#f92672">:</span> rgb<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            color <span style="color:#f92672">=</span> color <span style="color:#f92672">&lt;&lt;</span> 8<span style="color:#f92672">;</span>
            color <span style="color:#f92672">=</span> color <span style="color:#f92672">|</span> c<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> color<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> <span style="color:#a6e22e">getRandomRgb</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> rgb <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>3<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> 3<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            rgb<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>255<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> rgb<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">shear</span><span style="color:#f92672">(</span>Graphics g<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> w1<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> h1<span style="color:#f92672">,</span> Color color<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        shearX<span style="color:#f92672">(</span>g<span style="color:#f92672">,</span> w1<span style="color:#f92672">,</span> h1<span style="color:#f92672">,</span> color<span style="color:#f92672">);</span>
        shearY<span style="color:#f92672">(</span>g<span style="color:#f92672">,</span> w1<span style="color:#f92672">,</span> h1<span style="color:#f92672">,</span> color<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">shearX</span><span style="color:#f92672">(</span>Graphics g<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> w1<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> h1<span style="color:#f92672">,</span> Color color<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

        <span style="color:#66d9ef">int</span> period <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>2<span style="color:#f92672">);</span>

        <span style="color:#66d9ef">boolean</span> borderGap <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> frames <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> phase <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>2<span style="color:#f92672">);</span>

        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> h1<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">double</span> d <span style="color:#f92672">=</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">double</span><span style="color:#f92672">)</span> <span style="color:#f92672">(</span>period <span style="color:#f92672">&gt;&gt;</span> 1<span style="color:#f92672">)</span>
                    <span style="color:#f92672">*</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">sin</span><span style="color:#f92672">((</span><span style="color:#66d9ef">double</span><span style="color:#f92672">)</span> i <span style="color:#f92672">/</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">double</span><span style="color:#f92672">)</span> period
                    <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>6<span style="color:#f92672">.</span><span style="color:#a6e22e">2831853071795862D</span> <span style="color:#f92672">*</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">double</span><span style="color:#f92672">)</span> phase<span style="color:#f92672">)</span>
                    <span style="color:#f92672">/</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">double</span><span style="color:#f92672">)</span> frames<span style="color:#f92672">);</span>
            g<span style="color:#f92672">.</span><span style="color:#a6e22e">copyArea</span><span style="color:#f92672">(</span>0<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> w1<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> d<span style="color:#f92672">,</span> 0<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>borderGap<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                g<span style="color:#f92672">.</span><span style="color:#a6e22e">setColor</span><span style="color:#f92672">(</span>color<span style="color:#f92672">);</span>
                g<span style="color:#f92672">.</span><span style="color:#a6e22e">drawLine</span><span style="color:#f92672">((</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> d<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> i<span style="color:#f92672">);</span>
                g<span style="color:#f92672">.</span><span style="color:#a6e22e">drawLine</span><span style="color:#f92672">((</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> d <span style="color:#f92672">+</span> w1<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> w1<span style="color:#f92672">,</span> i<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>

    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">shearY</span><span style="color:#f92672">(</span>Graphics g<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> w1<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> h1<span style="color:#f92672">,</span> Color color<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

        <span style="color:#66d9ef">int</span> period <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>40<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> 10<span style="color:#f92672">;</span> <span style="color:#75715e">// 50;
</span><span style="color:#75715e"></span>
        <span style="color:#66d9ef">boolean</span> borderGap <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> frames <span style="color:#f92672">=</span> 20<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> phase <span style="color:#f92672">=</span> 7<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> w1<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">double</span> d <span style="color:#f92672">=</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">double</span><span style="color:#f92672">)</span> <span style="color:#f92672">(</span>period <span style="color:#f92672">&gt;&gt;</span> 1<span style="color:#f92672">)</span>
                    <span style="color:#f92672">*</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">sin</span><span style="color:#f92672">((</span><span style="color:#66d9ef">double</span><span style="color:#f92672">)</span> i <span style="color:#f92672">/</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">double</span><span style="color:#f92672">)</span> period
                    <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>6<span style="color:#f92672">.</span><span style="color:#a6e22e">2831853071795862D</span> <span style="color:#f92672">*</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">double</span><span style="color:#f92672">)</span> phase<span style="color:#f92672">)</span>
                    <span style="color:#f92672">/</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">double</span><span style="color:#f92672">)</span> frames<span style="color:#f92672">);</span>
            g<span style="color:#f92672">.</span><span style="color:#a6e22e">copyArea</span><span style="color:#f92672">(</span>i<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> h1<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> d<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>borderGap<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                g<span style="color:#f92672">.</span><span style="color:#a6e22e">setColor</span><span style="color:#f92672">(</span>color<span style="color:#f92672">);</span>
                g<span style="color:#f92672">.</span><span style="color:#a6e22e">drawLine</span><span style="color:#f92672">(</span>i<span style="color:#f92672">,</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> d<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> 0<span style="color:#f92672">);</span>
                g<span style="color:#f92672">.</span><span style="color:#a6e22e">drawLine</span><span style="color:#f92672">(</span>i<span style="color:#f92672">,</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> d <span style="color:#f92672">+</span> h1<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> h1<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>

        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

<span style="color:#75715e">//    public static void main(String[] args) throws IOException {
</span><span style="color:#75715e">//
</span><span style="color:#75715e">//        for (int i = 0; i &lt; 20; i++) {
</span><span style="color:#75715e">//            File dir = new File(&#34;E:/img/&#34;);
</span><span style="color:#75715e">//            int w = 200, h = 80;
</span><span style="color:#75715e">//            String verifyCode = generateVerifyCode(4);
</span><span style="color:#75715e">//            File file = new File(dir, verifyCode + &#34;.jpg&#34;);
</span><span style="color:#75715e">//            outputImage(w, h, file, verifyCode);
</span><span style="color:#75715e">//        }
</span><span style="color:#75715e">//
</span><span style="color:#75715e">//    }
</span><span style="color:#75715e"></span>

<span style="color:#f92672">}</span>
</code></pre></div><!-- raw HTML omitted -->
<h2 id="éªŒè¯ç è°ƒç”¨æ–¹æ³•å¹¶è¿”å›">éªŒè¯ç è°ƒç”¨æ–¹æ³•å¹¶è¿”å›</h2>
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> Result<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">verify</span><span style="color:#f92672">(</span>HttpServletRequest request<span style="color:#f92672">,</span> HttpServletResponse response<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

		Result<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> result <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Result<span style="color:#f92672">&lt;&gt;();</span>
		<span style="color:#75715e">// è·å–ç•Œé¢ä¼ è¿‡æ¥çš„éªŒè¯ç 
</span><span style="color:#75715e"></span>		String securityCode <span style="color:#f92672">=</span> Utility<span style="color:#f92672">.</span><span style="color:#a6e22e">randomString</span><span style="color:#f92672">(</span>4<span style="color:#f92672">);</span>
		ByteArrayOutputStream bos <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ByteArrayOutputStream<span style="color:#f92672">();</span>
		<span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
			ImageUtil<span style="color:#f92672">.</span><span style="color:#a6e22e">outputImage</span><span style="color:#f92672">(</span>107<span style="color:#f92672">,</span> 40<span style="color:#f92672">,</span> bos<span style="color:#f92672">,</span> securityCode<span style="color:#f92672">);</span>
			redisUtil<span style="color:#f92672">.</span><span style="color:#a6e22e">set</span><span style="color:#f92672">(</span>getVerifyKey<span style="color:#f92672">(</span>request<span style="color:#f92672">),</span> securityCode<span style="color:#f92672">.</span><span style="color:#a6e22e">toLowerCase</span><span style="color:#f92672">(</span>Locale<span style="color:#f92672">.</span><span style="color:#a6e22e">ENGLISH</span><span style="color:#f92672">),</span> 1 <span style="color:#f92672">*</span> 60<span style="color:#f92672">);</span>
			String verifys <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span>Base64<span style="color:#f92672">.</span><span style="color:#a6e22e">encodeBase64</span><span style="color:#f92672">(</span>bos<span style="color:#f92672">.</span><span style="color:#a6e22e">toByteArray</span><span style="color:#f92672">()));</span>
			result<span style="color:#f92672">.</span><span style="color:#a6e22e">setResult</span><span style="color:#f92672">(</span>verifys<span style="color:#f92672">);</span>
		<span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>JeecgBootException e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
			e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
			result<span style="color:#f92672">.</span><span style="color:#a6e22e">error500</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ç”ŸæˆéªŒè¯ç å¤±è´¥&#34;</span><span style="color:#f92672">);</span>
		<span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
			e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
			result<span style="color:#f92672">.</span><span style="color:#a6e22e">error500</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ç”ŸæˆéªŒè¯ç å¤±è´¥&#34;</span><span style="color:#f92672">);</span>
		<span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
			<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>bos <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
				<span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
					bos<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
				<span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>IOException e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
					e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
				<span style="color:#f92672">}</span>
			<span style="color:#f92672">}</span>
		<span style="color:#f92672">}</span>
		<span style="color:#66d9ef">return</span> result<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#66d9ef">private</span> String <span style="color:#a6e22e">getVerifyKey</span><span style="color:#f92672">(</span>HttpServletRequest request<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#75715e">// return request.getRequestedSessionId() + &#34;_Verify&#34;;
</span><span style="color:#75715e"></span>		String ipAddrByRequest <span style="color:#f92672">=</span> IPUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getIpAddr</span><span style="color:#f92672">(</span>request<span style="color:#f92672">);</span>
		<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>ipAddrByRequest<span style="color:#f92672">.</span><span style="color:#a6e22e">contains</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;.&#34;</span><span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
			ipAddrByRequest <span style="color:#f92672">=</span> ipAddrByRequest<span style="color:#f92672">.</span><span style="color:#a6e22e">replace</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;.&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">);</span>
		<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>ipAddrByRequest<span style="color:#f92672">.</span><span style="color:#a6e22e">contains</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;:&#34;</span><span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
			ipAddrByRequest <span style="color:#f92672">=</span> ipAddrByRequest<span style="color:#f92672">.</span><span style="color:#a6e22e">replace</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;:&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">);</span>
		<span style="color:#f92672">}</span>
		<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Verify_&#34;</span> <span style="color:#f92672">+</span> ipAddrByRequest<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>
</code></pre></div><!-- raw HTML omitted -->

                </section>
            </article>

            

            

            

            <footer id="footer">
    
        <div id="social">

	
	
    <a class="symbol" href="https://github.com/Virogeny">
        <i class="fa fa-github-square"></i>
    </a>
    


</div>

    
    <p class="small">
    
       Â© Copyright 2020 <i class="fa fa-heart" aria-hidden="true"></i> ç™½å°ç”Ÿ
    
    </p>
    <p class="small">
        Powered by <a href="http://www.gohugo.io/">Hugo</a> Theme By <a href="https://github.com/nodejh/hugo-theme-cactus-plus">nodejh</a>
    </p>
</footer>

        </section>

        <script src="https://brandykk.gitee.io/js/jquery-3.3.1.min.js"></script>
<script src="https://brandykk.gitee.io/js/main.js"></script>
<script src="https://brandykk.gitee.io/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'your_google_analytics_id', 'auto');
	
	ga('send', 'pageview');
}
</script>





    </body>
</html>
